## 2. Correct Any Validation Issues

Validation errors must be rectified before submission is allowed. How this is handled will depend on your integration - if you are integrating from a portal you may wish to allow users to edit the fields and update the draft. However, if you are purely integrating system to system, you'll need to ensure during development that all possible validation issues are handled if no manual intervention will be possible. All the possible permutations for validation messages you could possibly receive are far too extensive for this guide. We provide a list of all validation issues you could encounter at the following endpoint. The only valid value in this endpoint for country will be "CA" as of December 29th, 2025 as we do not provide these services outside Canada at this time. The possible values for jurisdiction can be found in the [values file](https://github.com/Reg-Hub/API/blob/main/UBO/Values.md).

```
GET {root}/api/v1/Validation/Rules/{country}/{jurisdiction}/UltimateBeneficialOwnershipReport
```

We begin with a _similar_ response to that we received when we created our draft in [Section 1: Create A Draft For Review](https://github.com/Reg-Hub/API/blob/main/UBO/1.%20Create%20a%20UBO%20order%20Draft). However, in this case, we see there are some validation issues (Again, some irrelevant fields and headers have been ommitted from the example).

```
HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8
Location: {root}/api/v1/Orders/b2c03f10-6389-4fa8-e73d-08de47190e3c

{
    "resource": {
        "id": "b2c03f10-6389-4fa8-e73d-08de47190e3c",
        "referenceNumber": "your_reference_number",
        "jurisdiction": "NS",
        "country": "CA",
        "orderGroup": {
            "id": "54425829-2cde-4f10-add1-08de4717a64c",
            "lastOrderType": "UltimateBeneficialOwnershipReport"
        },
        "orderTypeID": "UltimateBeneficialOwnershipReport",
        "orderStatusTypeID": "Draft",
        "dateRequested": "2025-12-30T04:54:01.3702698+00:00",
        "orderStatusUpdatedDate": "2025-12-30T04:54:01.3702699+00:00",
        "ultimateBeneficialOwnershipRequest": {
            "entityName": "BUSINESS NAME OF ENTITY",
            "entityNumber": "BUSINESS NUMBER OF ENTITY",
            "secondaryTransactionID": null,
            "primaryTransactionID": null,
            "hasIdRequirement": false,
            "attestorIdentityRequirement": "None",
            "attestorIdentityResult": "Pending",
            "attestorAssociatedWithReport": false,
            "clientNumber": null,
            "requiresAtLeastOneShareholder": false,
            "minimumSharholderPercentage": null,
            "hasDeclaredNoBeneficialOwners": false,
            "idvResults": null,
            "questions": [],
            "documents": [],
            "shareholders": [],
            "templateID": "5faaa0f5-2ae1-4511-e22f-08ddf45e6e27"
        },
        "parties": [
            {
                "id": "cd2c9fe0-d3c7-4ed1-a4cf-08de47de3419", 
                "middleName": "MIDDLE NAME OF ATTESTOR",
                "lastName": "LAST NAME OF ATTESTOR",
                "partyTypeID": "IndividualAttestor",
                "contactDetails": {
                    "email": "EMAIL OF ATTESTOR",
                    "phoneNumber": null,
                    "address": null
                }
            }
        ]
    },
    "validation": {        
        "errors": [
            {
                "path": "Parties/cd2c9fe0-d3c7-4ed1-a4cf-08de47de3419/Name",
                "message": "Parties of person type require both FirstName and LastName.",
                "userFriendlyMessage": "Parties of person type require both first and last names.",
                "entityID": "cd2c9fe0-d3c7-4ed1-a4cf-08de47de3419",
                "showForClient": true
            }
        ],
        "warnings": [],
        "notices": []
    }
}
```
Note the pressence of items in the "errors" array in the "validation" object. Below is a brief description of each of the errors, warnings, and notices arrays.

| Field | Description | Submittable |
| --- | --- | --- |
| Errors | Lists actual validation errors that make the order invalid. If errors are provided, this means the order cannot be submitted until they are rectified. | NO |
| Warnings | Lists _potential_ validation issues that may be relevant to the user. If warnings are provided, the order CAN still be submitted, but the user _may_ want to have the chance to rectify these potential issues. | YES |
| Notices | Lists any notices on the order. These are provided when something is impossible for RegHub to validate but we still want to ensure our clients are aware of a potential issue. | YES |


### Useful Endpoints

Orders may be updated by sending a representation of the updated order to the endpoint:

```
PUT {root}/api/v1/Orders/UltimateBeneficialOwnershipReports/{orderID}
```

For example, if I wanted to correct the validation error in the above response that says "Parties of person type require both FirstName and LastName," I might send a PUT request of the order in the state I received back, except with the first name of the attestor provided.

The expected successful responses from PUT requests are 200 OK with a response body similar to the one provided at the start of this section, containing the now updated representation of the order.

If you wish to delete the order and start over you can use the same urls with the method set to DELETE.

Another useful endpoint to get the current state of the orders is the following:

```
GET {root}/api/v1/Orders/UltimateBeneficialOwnershipReports/{orderID}
Accept: application/json
Accept: application/vnd.reghub.order-with-validation+json
```

Setting the accept header to application/json (or */*) will return a representation of the order. Setting the accept header to application/vnd.reghub.order-with-validation+json will return the same response as that which you get on POST or PUT requests (the "resource" with the order and the "validation" with the validation issues).

Once your order no longer has any validation errors, [you are ready to submit.](https://github.com/Reg-Hub/API/blob/main/UBO/3.%20Submit%20Order%20and%20Wait%20for%20Results.md)
