## Retrieve Hub Report

Once your order is in status "Complete" you may retreive your hub report. We provided a nice PDF that packages all relevant information from the hub report tree into once place. You may retreive this report at the following endpoint.

```
GET {root}/api/v1/Orders/{orderID}/HubReport
Accept: application/pdf
```

This endpoint returns a binary of the PDF Hub Report.

If you wish to or are required to provided a version for your portal or construct your own document, this is still possible. You may use the same endpoint as above with the accept header set to application/json.

```
GET {root}/api/v1/Orders/{orderID}/HubReport
Accept: application/json
```

This will provide a json representation of the hub report. __It's important to note, however, that this endpoint does not provide all of the data.__ This endpoint returns a very minimal representation of the hub report intended to be used by you to build up the hub report however you see fit.

Below is an example:

```
{
    "id": "308bb322-1129-4460-e091-08de422818af",
    "reference": "4638403",
    "jurisdiction": "NS",
    "hubReportOrders": [
        {
            "id": "723dd906-f049-4c4d-0ab0-08de422818b0",
            "orderID": "7a0d003e-7444-4c90-c279-08de419a97f3",
            "orderGroupID": "00000000-0000-0000-0000-000000000000",
            "parentHubReportOrderID": null,
            "orderStatus": "Complete",
            "orderType": "BusinessReport",
            "orderJurisdiction": "NS",
            "reference": "4638403",
            "orderReferenceNumber": "4638403"
        },
        {
            "id": "da501eae-c307-48aa-0ab1-08de422818b0",
            "orderID": "dbb8b04f-73af-441a-f202-08de41b8946e",
            "orderGroupID": "00000000-0000-0000-0000-000000000000",
            "parentHubReportOrderID": "723dd906-f049-4c4d-0ab0-08de422818b0",
            "orderStatus": "Complete",
            "orderType": "UltimateBeneficialOwnershipReport",
            "orderJurisdiction": "NS",
            "reference": "4638403",
            "orderReferenceNumber": "4638403"
        }
        {
            "id": "2965664f-4c76-48fa-d4bc-08de42246365",
            "orderID": "2bb7552e-e932-4459-52c8-08de41b7a8e2",
            "orderGroupID": "00000000-0000-0000-0000-000000000000",
            "parentHubReportOrderID": "723dd906-f049-4c4d-0ab0-08de422818b0",
            "orderStatus": "Complete",
            "orderType": "PEPsAndSanctions",
            "orderJurisdiction": "NS",
            "reference": "4638403",
            "orderReferenceNumber": "4638403"
        },
    ]
}
```

Note the presence of an order with order type "PEPsAndSanctions" - this order type may or may not be run automatically depending on the configuration of your attestation template.

### The Tree

Note the field "parentHubReportOrderID" in the items in the "hubReportOrders" array. Given the potentially recursive nature of these ultimate beneficial ownership reports (recall that you may be required to do a business report/UBO on any beneficial owners that are businesses and own 25% of the parent entity), it lends itself well to a tree structure. The hub report order with its hubReportOrderID set to null will always be the root (the actual entity of interest).

Nodes with order type UltimateBeneficialOwnershipReport or PEPsAndSanctions may only be leafs on the tree. Put another way, the ID of those nodes will never be used as the value of parentHubReportOrderID in another node. Nodes with order type BusinessReport may be leaves __or__ they may have further children depending on the state of the tree. 

The "reference" field of each node will contain the business number for the entity of the business report or the node's parent business report.

### Results for Individual Orders

__BusinessReports__

You will likely want to get the registry results for each business report. This can be accomplished with the following endpoint:

```
GET {root}/api/v1/Orders/BusinessReports/{orderID}/Document
Accept: application/json
```

It is likely if you are integrating with UBO order endpoints that you already have an integration for business report endpoints - please refer to the [KYB documentation](https://github.com/Reg-Hub/API/blob/main/KYB_README.md) for more information.

__PEPsAndSanctions__

Results for these orders are stored on the individual parties of a peps and sanctions order. You can retreive them with the following endpoint:

// TODO: Finish section when PEPs and Sactions are exposed publicly.

__UltimateBeneficialOwnershipReports__

Any and all information entered by the attestor can be found on the order itself at the endpoint

```
GET {root}/api/v1/UltimateBeneficialOwnershipReports/{orderID}
```

